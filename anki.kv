#:kivy 2.2.0
<MenuButton@Button>:
  size: self.texture_size
  font_size: 40#90
  bold: "true"
  color: app.main_color
  background_color: 1, 1, 1, 0
  background_normal: ""

<CountLabel@Label>:
  font_size: 30#90
  bold: "true"
  pos: self.pos

<Menu>:
  BoxLayout:
    orientation: "vertical"
    canvas:
      Rectangle:
        size: root.size
        pos: root.pos
    Image:
      source: "images/cover.png"
      allow_stretch: True
      size_hint: .8, .7
      pos_hint: {'right': .9, 'top': .1}
    MenuButton:
      text: "НАЧАТЬ ТРЕНИРОВКУ"
      on_press: root.screens_order();  #root.manager.current = "main" #
      size_hint: 1, .3

<MainWidget>:
  id: main_widget
  canvas:
    Rectangle:
      size: root.size
      pos: root.pos
  BoxLayout:
    id: main_box
    front_label: front_label.__self__
    back_label: back_label.__self__
    open_button: open_button.__self__
    rating_box: rating_box.__self__
    orientation: 'vertical'
    BoxLayout:
      size_hint: 1,.1
      # canvas.before:
      #   Color:
      #     rgba: 55/255, 0, 23/255, 1
      #   Rectangle:
      #     size: self.size
      #     pos: self.pos
      MenuButton:
        id: back_menu
        padding: ('10dp', '0dp', '0dp', '0dp')
        size_hint: .7, 1
        text_size: self.size
        halign: 'left'
        valign: 'middle'
        text: "МЕНЮ"
        on_press: root.manager.current = "menu"
      BoxLayout:
        id: box_count
        size_hint: .3, 1
        CountLabel:
          id: new
          text: root.new
          color: 0, 138/255, 1, 1
          # canvas.before:
          #   Color:
          #     rgba: 55/255, 0, 23/255, 1
          #   Rectangle:
          #     size: self.size
          #     pos: self.pos
          # markup: True
          # underline: root.underline_new
        CountLabel:
          id: inround
          text: root.inround
          color: 1, 0, 0, .7
          # markup: True
          # underline: root.underline_inround
        CountLabel:
          id: studied
          text: root.studied
          color: 0, 210/255, 72/255, 1
          # markup: True
          # underline: root.underline_studied
    Label:
      id: front_label
      size_hint: 1,.1
      text: root.front
      font_size: 60
      color: 0, 142/255, 1, 1
      # canvas.before:
      #   Color:
      #     rgba: 0, 55/255, 0, 1
      #   Rectangle:
      #     size: self.size
      #     pos: self.pos
    Label:
      size_hint: 1,.1
      id: back_label
      text: root.back
      markup: True 
      font_size: 60
      color: app.main_color
      # canvas.before:
      #   Color:
      #     rgba: 17/255, 185/255, 0, 1
      #   Rectangle:
      #     size: self.size
      #     pos: self.pos
    Image:
      id: picture
      size_hint: 1,.5
      source: root.picture_link
      allow_stretch: True

    MenuButton:
      id: open_button
      size_hint: 1,.1

      text: 'ОТРЫТЬ'
      on_press: root.open_card()
      # canvas.before:
      #   Color:
      #     rgba: 147/255, 0, 85/255, 1
      #   Rectangle:
      #     size: self.size
      #     pos: self.pos
    BoxLayout:
      id: rating_box
      size_hint: 1,.1
      # canvas.before:
      #   Color:
      #     rgba: 0, 0, 185/255, 1
      #   Rectangle:
      #     size: self.size
      #     pos: self.pos
      MenuButton:
        id: again
        size_hint: .25,1
        color: 1, 0, 0, .7
        text: 'снова'
        on_press: root.rating("again")
      MenuButton:
        id: hard
        size_hint: .3,1
        color: 120/255, 120/255, 120/255, 1
        text: 'сложно'
        on_press: root.rating("hard")
      MenuButton:
        id: good
        size_hint: .3,1
        color: 0, 210/255, 72/255, 1
        text: 'хорошо'
        on_press: root.rating("good")
      MenuButton:
        id: easy
        size_hint: .25,1
        color: 0, 142/255, 1, 1
        text: 'легко'
        on_press: root.rating("easy")
<Progress>:
  BoxLayout:
    orientation: "vertical"
    canvas:
      Color:
        rgba: 1, 1, 1, 1
      Rectangle:
        size: root.size

    BoxLayout:    # 9% --------------------------------------------
      size_hint: 1, .09
      MenuButton:
        id: back_menu
        padding: ('10dp', '0dp', '0dp', '0dp')
        size_hint: .7, 1
        text_size: self.size
        halign: 'left'
        valign: 'middle'
        text: "МЕНЮ"
        on_press: root.manager.current = "menu"

    BoxLayout: # 10%
      orientation: 'vertical'
      id: message_box
      # size_hint: 1, .3
      Label:
        text: root.studied
        font_size: 30
        color: app.main_color
        size_hint: 1, .1
      Label:
        text: root.studied
        color: app.main_color
        font_size: 30
        size_hint: 1, .1
      Label:
        text: root.studied
        font_size: 30
        color: app.main_color
        size_hint: 1, .1
